var y=Object.defineProperty;var f=(i,t,e)=>t in i?y(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var a=(i,t,e)=>(f(i,typeof t!="symbol"?t+"":t,e),e);import{S as x,P as z,W as I,V as o,L as W,M as F,B as g,a as u}from"./three.module-0TS61eSs.js";const l=3.14159265359,M=40,p=(i,t)=>{i.x+=t.x,i.y+=t.y,i.z+=t.z},c=(i,t)=>Math.random()*Math.abs(t-i)+Math.min(t,i);class A{constructor({dom:t,wallSize:e=M,colors:n}){a(this,"wallSize");a(this,"scene");a(this,"camera");a(this,"renderer");a(this,"animationFrames",0);a(this,"rotationIncrement",{x:0,y:0,z:0});a(this,"positionIncrement",{x:0,y:0,z:0});a(this,"animate",()=>{requestAnimationFrame(this.animate),this.animationFrames===0&&({animationFrames:this.animationFrames,rotationIncrement:this.rotationIncrement,positionIncrement:this.positionIncrement}=this.getCameraAnimation()),p(this.camera.rotation,this.rotationIncrement),p(this.camera.position,this.positionIncrement),this.animationFrames--,this.renderer.render(this.scene,this.camera)});if(typeof(t==null?void 0:t.appendChild)!="function")throw Error("invalid dom");if(e<=0)throw Error("invalid wall size");if(!n)throw Error("invalid colors");this.wallSize=e;const{clientWidth:h,clientHeight:s}=t;console.log({width:h,height:s}),this.scene=new x,this.camera=new z(75,h/s,.1,1e3),this.renderer=new I,this.renderer.setSize(h,s),t.appendChild(this.renderer.domElement);const m=this.makeWall(e*2,n.floor,r=>[new o(r,0,0),new o(r,0,e*2)]),d=this.makeWall(e,n.left,r=>[new o(0,r,0),new o(0,r,e*2)]),w=this.makeWall(e,n.right,r=>[new o(0,r,0),new o(e*2,r,0)]);this.scene.add(m),this.scene.add(d),this.scene.add(w),this.camera.position.x=e/3,this.camera.position.y=e/3,this.camera.position.z=e/3}makeWall(t,e,n){const h=new W({color:e}),s=new F;for(let m=0;m<t;m++){const d=new g().setFromPoints(n(m));s.add(new u(d,h))}return s}getCameraAnimation(){const t={x:c(-.15*l,-.1*l),y:c(0,.5*l),z:Math.random()*.3*l-.15},e={x:c(this.wallSize/4,this.wallSize/3),y:c(this.wallSize/6,this.wallSize/3),z:c(this.wallSize/4,this.wallSize/3)},n=180;return{animationFrames:n,rotationIncrement:{x:(t.x-this.camera.rotation.x)/n,y:(t.y-this.camera.rotation.y)/n,z:(t.z-this.camera.rotation.z)/n},positionIncrement:{x:(e.x-this.camera.position.x)/n,y:(e.y-this.camera.position.y)/n,z:(e.z-this.camera.position.z)/n}}}}export{A as W};
